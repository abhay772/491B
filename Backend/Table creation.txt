IF EXISTS (SELECT name FROM sys.databases WHERE name = 'UsersDB')
BEGIN
    ALTER DATABASE UsersDB SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
    DROP DATABASE AA.UsersDB;
    DROP DATABASE UsersDB;
END
GO

CREATE DATABASE AA.UsersDB;
GO

USE AA.UsersDB;
GO

DROP TABLE IF EXISTS UserProfiles;
DROP TABLE IF EXISTS UserAccounts;
CREATE TABLE UserProfiles (
    Username VARCHAR(200) PRIMARY KEY,
    Email VARCHAR(200) NOT NULL,
    FirstName VARCHAR(200) NOT NULL,
    LastName VARCHAR(200) NOT NULL,
    Role VARCHAR(200) NOT NULL
);

CREATE TABLE UserAccounts (
    Username VARCHAR(200) PRIMARY KEY,
    Role VARCHAR(200) NOT NULL,
    PassDigest VARCHAR(255) NOT NULL,
    Salt VARCHAR(255) NOT NULL,
    IsActive BIT NOT NULL,
    Attempts INT NOT NULL,
    Timestamp DATETIME NOT NULL,
    OTP VARCHAR(200) NULL,
    OTPTimestamp DATETIME NULL,
    RecoveryRequest BIT NULL
);



CREATE DATABASE DIYDB;
GO

USE DIYDB;
GO

CREATE TABLE DIYTable (
    DIYID INT IDENTITY(1,1) PRIMARY KEY,
    DIYEmail NVARCHAR(50),
    DIYName NVARCHAR(50),
    DIYDescription NVARCHAR(200),
    DIYVideo VARBINARY(MAX)
);

CREATE TABLE DIYDashboard (
    DIYEmail NVARCHAR(50) NOT NULL,
    DIYID INT NOT NULL,
    FOREIGN KEY (DIYID) REFERENCES DIYTable(DIYID)
);






USE master;
GO

IF NOT EXISTS (SELECT name FROM sys.databases WHERE name = 'AA.CrimeMapDB')
BEGIN
    CREATE DATABASE [AA.CrimeMapDB]
END
GO

USE [AA.CrimeMapDB];
GO

CREATE TABLE CrimeAlerts (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    Email VARCHAR(255) NOT NULL,
    Name VARCHAR(255) NOT NULL,
    Location VARCHAR(255) NOT NULL,
    Description VARCHAR(255) NOT NULL,
    Time VARCHAR(255) NOT NULL,
    Date VARCHAR(255) NOT NULL,
    X FLOAT NOT NULL,
    Y FLOAT NOT NULL
);
GO